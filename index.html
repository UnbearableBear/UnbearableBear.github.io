<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Mon coeur</title>
    <link href="https://fonts.googleapis.com/css?family=Indie+Flower" rel="stylesheet">
    <style>
      html {
        height: 100%;
        font-family: 'Indie Flower', cursive;
        background-color: rgba(0,0,0, 0.90);
      }
      body {
        margin: 0;
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        text-align: center;
        font-size: 6vh;
        color: #fafafa;
      }
      #jetaime {
        position: absolute;
        z-index: 1;
        top: 0;
        width: 100%;
        text-align: center;
        margin-top: 5vh;
      }
      #intensite {
        position: absolute;
        bottom: 0;
        width: 100%;
        margin-bottom: 5vh;
        text-align: center;
      }
      #coeur {
        width: 5vh;
        fill: rgba(244, 66, 89, 1);
        cursor: pointer;
        transition-property: width;
        transition-timing-function: ease-out;
        filter: drop-shadow(0 0 20px rgba(244, 66, 89, 0.8));
        -webkit-tap-highlight-color: rgba(0,0,0,0);
        -webkit-tap-highlight-color: transparent;
      }
      .pulse {
        animation: pulse 2s ease-out infinite 0.5s;
      }

      @keyframes pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.05); }
        100% { transform: scale(1); }
      }
    </style>
  </head>
  <body>
    <div id="jetaime">Je t'aime...</div>
    <svg id="coeur" viewBox="0 0 32 29.6">
      <path d="M23.6,0c-3.4,0-6.3,2.7-7.6,5.6C14.7,2.7,11.8,0,8.4,0C3.8,0,0,3.8,0,8.4c0,9.4,9.5,11.9,16,21.2
      c6.1-9.3,16-12.1,16-21.2C32,3.8,28.2,0,23.6,0z"/>
    </svg>
    <div id="intensite"></div>
    <script>
      // On ne va pa se priver du charme de la langue française quand même ?
      const coeur = document.getElementById('coeur')
      // Je l'appelle entensiteEL à cause d'un putain de bug de ***** sur ***** de navigateur de ***** qu'est safari
      const  intensiteEl = document.getElementById('intensite')
      let currentTimeout
      const intensites = [
        'pas du tout :(',
        'un peu...',
        'beaucoup',
        'passionnément !',
        'à la folie !'
      ]
      function destinee() {
        return Math.round(Math.random() * (intensites.length - 1))
      }
      coeur.addEventListener('click', () => {

        window.clearTimeout(currentTimeout)
        coeur.classList.remove('pulse')
        coeur.style.transitionDuration = '0s'
        coeur.style.width = '5vh'
        intensiteEl.innerHTML = ''

        window.setTimeout(() => {
          let prophetie = destinee()
          prophetie = prophetie < 2 ? destinee() : prophetie // C'est entre toi et moi ;)
          coeur.style.transitionDuration = prophetie + 's'
          coeur.style.width = (5 + prophetie * 11) + 'vh'
          currentTimeout = window.setTimeout(() => {
            intensiteEl.innerHTML = intensites[prophetie]
            coeur.classList.add('pulse')
          }, prophetie * 1000)
        }, 100) // on laisse un peu le temps au coeur de se remettre de ses émotions

      }, false)
    </script>
  </body>
</html>
